<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Global Health & Wellness News | ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏î‡∏µ</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500&family=Outfit:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@300;400;500;600&display=swap" rel="stylesheet">

  <style>
    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ANIMATIONS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    @keyframes breathe { 0%,100%{transform:scale(1);opacity:.6} 50%{transform:scale(1.05);opacity:1} }
    @keyframes dnaHelix { 0%{background-position:0% 0%} 100%{background-position:100% 100%} }
    @keyframes pulseRing { 0%{transform:scale(.95);opacity:0} 50%{opacity:1} 100%{transform:scale(1.4);opacity:0} }
    @keyframes fadeSlideUp { from{opacity:0;transform:translateY(28px)} to{opacity:1;transform:translateY(0)} }
    @keyframes cardReveal { from{opacity:0;transform:translateY(24px) scale(.97)} to{opacity:1;transform:translateY(0) scale(1)} }
    @keyframes shimmerFlow { 0%{background-position:-300% 0} 100%{background-position:300% 0} }
    @keyframes heartbeat { 0%,100%{transform:scale(1)} 14%{transform:scale(1.15)} 28%{transform:scale(1)} 42%{transform:scale(1.08)} 56%{transform:scale(1)} }
    @keyframes floatOrb { 0%,100%{transform:translate(0,0) scale(1)} 25%{transform:translate(30px,-20px) scale(1.1)} 50%{transform:translate(-10px,-40px) scale(.95)} 75%{transform:translate(-30px,-10px) scale(1.05)} }
    @keyframes tipPop { 0%{opacity:0;transform:translateX(-50%) translateY(8px) scale(.96)} 100%{opacity:1;transform:translateX(-50%) translateY(0) scale(1)} }

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê RESET & BASE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    body{min-height:100vh;background:#080c0a;font-family:'Outfit',sans-serif;color:#dce8e0;overflow-x:hidden}
    body::before{content:'';position:fixed;inset:0;background:
      radial-gradient(circle at 15% 20%,rgba(16,185,129,.07) 0%,transparent 40%),
      radial-gradient(circle at 85% 80%,rgba(139,92,246,.05) 0%,transparent 40%),
      radial-gradient(circle at 50% 50%,rgba(6,182,212,.04) 0%,transparent 50%);
      pointer-events:none;z-index:0}
    body::after{content:'';position:fixed;inset:0;opacity:.025;background-image:
      repeating-linear-gradient(60deg,transparent,transparent 40px,rgba(16,185,129,.4) 40px,rgba(16,185,129,.4) 41px),
      repeating-linear-gradient(-60deg,transparent,transparent 40px,rgba(6,182,212,.3) 40px,rgba(6,182,212,.3) 41px);
      animation:dnaHelix 30s linear infinite;background-size:200% 200%;
      pointer-events:none;z-index:0}
    ::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:#080c0a}
    ::-webkit-scrollbar-thumb{background:#1a3a2a;border-radius:3px}
    ::-webkit-scrollbar-thumb:hover{background:#10b981}

    .container{position:relative;z-index:1;max-width:1320px;margin:0 auto}

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ORBS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    .orb{position:fixed;border-radius:50%;filter:blur(80px);pointer-events:none;z-index:0}
    .orb-1{width:400px;height:400px;background:rgba(16,185,129,.08);top:-100px;left:-100px;animation:floatOrb 20s ease-in-out infinite}
    .orb-2{width:300px;height:300px;background:rgba(139,92,246,.06);bottom:-50px;right:-50px;animation:floatOrb 25s ease-in-out infinite reverse}
    .orb-3{width:250px;height:250px;background:rgba(6,182,212,.05);top:50%;left:60%;animation:floatOrb 18s ease-in-out infinite 5s}

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TOP BAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    .top-bar{height:4px;background:linear-gradient(90deg,#10b981,#06b6d4,#8b5cf6,#f59e0b,#ef4444,#ec4899,#10b981);background-size:300% 100%;animation:shimmerFlow 8s linear infinite}

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TIMESTAMP BAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    .timestamp-bar{text-align:center;padding:14px 20px;font-family:'JetBrains Mono',monospace;font-size:12px;color:#8ba89a;letter-spacing:1px}
    .timestamp-bar .time-value{color:#06b6d4;font-weight:600}
    .timestamp-bar .schedule{margin-left:24px;color:#fbbf24}

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HEADER / HERO ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    header{padding:0 36px}
    .hero{position:relative;border:1px solid rgba(16,185,129,.15);border-radius:20px;padding:52px 48px 44px;background:
      linear-gradient(160deg,rgba(16,185,129,.06) 0%,rgba(8,12,10,.95) 35%,rgba(6,182,212,.04) 70%,rgba(139,92,246,.03) 100%);
      overflow:hidden;animation:fadeSlideUp .8s ease-out}
    .hero-cell{position:absolute;border-radius:50%;border:1px solid rgba(16,185,129,.08);animation:breathe 6s ease-in-out infinite}
    .hero-cell-1{width:200px;height:200px;top:-60px;right:-40px}
    .hero-cell-2{width:140px;height:140px;top:20px;right:80px;animation-delay:2s;border-color:rgba(6,182,212,.08)}
    .hero-cell-3{width:90px;height:90px;bottom:-20px;right:200px;animation-delay:4s;border-color:rgba(139,92,246,.08)}
    .hero-badge{display:inline-flex;align-items:center;gap:10px;margin-bottom:20px}
    .hero-pulse{position:relative;width:10px;height:10px}
    .hero-pulse-dot{width:10px;height:10px;background:#10b981;border-radius:50%;position:absolute}
    .hero-pulse-ring{position:absolute;inset:-4px;border:2px solid #10b981;border-radius:50%;animation:pulseRing 2s ease-out infinite}
    .hero-live-text{font-family:'JetBrains Mono',monospace;font-size:11px;font-weight:500;color:#10b981;letter-spacing:2px;text-transform:uppercase}
    .hero-title{font-family:'Playfair Display',Georgia,serif;font-size:clamp(32px,5.5vw,58px);font-weight:800;line-height:1.1;margin-bottom:16px;letter-spacing:-.5px}
    .hero-title .line1{display:block;color:#f0faf4}
    .hero-title .line2{display:block;background:linear-gradient(135deg,#10b981 0%,#06b6d4 40%,#8b5cf6 80%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-style:italic}
    .hero-tagline{font-family:'JetBrains Mono',monospace;font-size:12px;letter-spacing:3px;text-transform:uppercase;color:#6b8f7b}

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê EXECUTIVE SUMMARY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    .exec-summary{padding:0 36px;margin-top:28px;animation:fadeSlideUp .9s ease-out}
    .exec-summary-title{font-family:'Playfair Display',serif;font-size:24px;font-weight:700;color:#10b981;margin-bottom:18px}
    .exec-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    .exec-col{background:linear-gradient(160deg,rgba(14,24,18,.95),rgba(8,12,10,.98));border:1px solid rgba(16,185,129,.12);border-radius:14px;padding:22px 20px}
    .exec-col-title{font-family:'Outfit',sans-serif;font-size:14px;font-weight:700;margin-bottom:14px;letter-spacing:.5px}
    .exec-col:nth-child(1) .exec-col-title{color:#06b6d4}
    .exec-col:nth-child(2) .exec-col-title{color:#f59e0b}
    .exec-col:nth-child(3) .exec-col-title{color:#f472b6}
    .exec-item{font-size:13px;line-height:1.6;color:#b0c8ba;padding:4px 0 4px 14px;position:relative;border-bottom:1px solid rgba(16,185,129,.06)}
    .exec-item:last-child{border-bottom:none}
    .exec-item::before{content:'‚ñ∏';position:absolute;left:0;color:#10b981;font-size:11px}

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê METHODOLOGY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    .methodology{padding:0 36px;margin-top:24px;animation:fadeSlideUp 1s ease-out}
    .methodology-title{font-family:'Playfair Display',serif;font-size:18px;font-weight:600;color:#8b5cf6;font-style:italic;margin-bottom:14px}
    .method-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:14px}
    .method-box{background:rgba(14,24,18,.8);border:1px solid rgba(139,92,246,.1);border-radius:12px;padding:18px 16px}
    .method-icon{font-size:20px;margin-bottom:8px}
    .method-label{font-family:'Outfit',sans-serif;font-size:13px;font-weight:700;color:#06b6d4;margin-bottom:6px}
    .method-text{font-size:12px;line-height:1.5;color:#8ba89a}

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TOOLTIP (PC hover + Mobile tap) ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    .tip{position:relative;display:inline-flex;align-items:center;justify-content:center}
    .tip::after{
      content: attr(data-tip);
      position:absolute;
      left:50%;
      bottom: calc(100% + 12px);
      transform: translateX(-50%) translateY(8px) scale(.96);
      background: rgba(0,0,0,.72);
      border:1px solid rgba(255,255,255,.14);
      color:#dce8e0;
      padding:8px 10px;
      border-radius:12px;
      font-family:'JetBrains Mono',monospace;
      font-size:11px;
      white-space:nowrap;
      opacity:0;
      pointer-events:none;
      backdrop-filter: blur(10px);
      z-index:30;
    }
    .tip::before{
      content:'';
      position:absolute;
      left:50%;
      bottom: calc(100% + 6px);
      width:10px;height:10px;
      background: rgba(0,0,0,.72);
      border-left:1px solid rgba(255,255,255,.14);
      border-top:1px solid rgba(255,255,255,.14);
      transform: translateX(-50%) translateY(8px) rotate(45deg);
      opacity:0;
      pointer-events:none;
      z-index:29;
    }
    /* PC hover */
    .tip:hover::after,.tip:hover::before{opacity:1}
    .tip:hover::after{animation:tipPop .16s ease-out both}
    .tip:hover::before{animation:tipPop .16s ease-out both}
    /* Mobile tap (JS toggles .tip-open) */
    .tip.tip-open::after,.tip.tip-open::before{opacity:1}
    .tip.tip-open::after{animation:tipPop .16s ease-out both}
    .tip.tip-open::before{animation:tipPop .16s ease-out both}

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê FILTER + CONTROLS BAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    .controls-wrap{padding:20px 36px 10px;display:flex;align-items:center;gap:10px;flex-wrap:wrap;animation:fadeSlideUp 1.1s ease-out}
    .filter-btn{font-family:'Outfit',sans-serif;font-size:13px;font-weight:600;padding:8px 20px;border-radius:24px;border:1px solid rgba(16,185,129,.2);background:rgba(14,24,18,.6);color:#8ba89a;cursor:pointer;transition:all .3s;letter-spacing:.5px}
    .filter-btn:hover{border-color:rgba(16,185,129,.5);color:#dce8e0}
    .filter-btn.active{background:rgba(16,185,129,.15);border-color:#10b981;color:#10b981;box-shadow:0 0 16px rgba(16,185,129,.15)}
    .filter-btn .count{font-size:11px;opacity:.7;margin-left:4px}
    .controls-spacer{flex:1}

    .searchbox{
      display:flex;align-items:center;gap:10px;
      padding:9px 14px;border-radius:999px;
      border:1px solid rgba(16,185,129,.14);
      background:rgba(14,24,18,.55);
      min-width:240px;flex: 1 1 260px;
    }
    .searchbox .icon{opacity:.7}
    .searchbox input{
      width:100%;background:transparent;border:0;outline:0;
      color:#dce8e0;font-family:'JetBrains Mono',monospace;font-size:12px;
    }
    .searchbox input::placeholder{color:#5f7f70}

    .sortsel{
      flex: 0 0 auto;
      font-family:'JetBrains Mono',monospace;
      font-size:12px;color:#dce8e0;
      padding:10px 12px;border-radius:12px;
      border:1px solid rgba(16,185,129,.14);
      background:rgba(14,24,18,.55);
      outline:0;
      cursor:pointer;
    }

    .calls-badge{
      flex: 0 0 auto;
      font-family:'JetBrains Mono',monospace;
      font-size:11px;color:#6b8f7b;
      padding:6px 14px;border:1px solid rgba(16,185,129,.1);
      border-radius:20px;background:rgba(14,24,18,.6)
    }

    /* Sticky controls */
    .controls-wrap.sticky{
      position: sticky;
      top: 0;
      z-index: 10;
      backdrop-filter: blur(14px);
      background: rgba(8,12,10,.68);
      border-bottom: 1px solid rgba(16,185,129,.08);
      padding-top: 14px;
      padding-bottom: 14px;
    }

    /* Status pill */
    .status-pill{
      flex: 0 0 auto;
      font-family:'JetBrains Mono',monospace;
      font-size:11px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(14,24,18,.55);
      color:#8ba89a;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .status-dot{width:8px;height:8px;border-radius:50%;background:rgba(255,255,255,.25)}
    .status-ok .status-dot{background:#10b981}
    .status-partial .status-dot{background:#f59e0b}
    .status-err .status-dot{background:#ef4444}

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PARTIAL BANNER / ERRORS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    .banner{padding:0 36px;margin-top:14px;display:none}
    .banner.show{display:block}
    .banner-inner{
      border-radius:14px;
      border:1px solid rgba(245,158,11,.22);
      background: rgba(245,158,11,.08);
      padding: 12px 14px;
      color:#ffe7c2;
      font-family:'JetBrains Mono',monospace;
      font-size:12px;
      line-height:1.5;
      display:flex;
      gap:12px;
      justify-content:space-between;
      align-items:flex-start;
    }

    .errors{padding:0 36px;margin-top:10px;display:none}
    .errors.show{display:block}
    .errors-inner{
      border-radius:14px;
      border:1px solid rgba(239,68,68,.22);
      background: rgba(239,68,68,.07);
      padding: 12px 14px;
      color:#ffd4d4;
      font-family:'JetBrains Mono',monospace;
      font-size:12px;
      line-height:1.5;
      white-space:pre-wrap;
    }

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CARD GRID ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    main{padding:24px 36px 60px;animation:fadeSlideUp 1.2s ease-out}
    .cards{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .card{
      position:relative;
      padding:22px 20px 18px;
      border-radius:16px;
      border:1px solid rgba(16,185,129,.12);
      background:linear-gradient(160deg,rgba(14,24,18,.92),rgba(8,12,10,.98));
      overflow:hidden;
      animation:cardReveal .55s ease both;
      box-shadow:0 18px 60px rgba(0,0,0,.35);
    }
    .card::before{
      content:'';
      position:absolute;inset:-2px;
      background:radial-gradient(220px 120px at 15% 0%,rgba(16,185,129,.12),transparent 60%);
      pointer-events:none;
    }
    .badge{
      display:inline-flex;align-items:center;gap:8px;
      padding:6px 10px;border-radius:999px;
      border:1px solid rgba(16,185,129,.18);
      background:rgba(16,185,129,.08);
      font-family:'JetBrains Mono',monospace;
      font-size:11px;
      letter-spacing:1px;
      color:#a9f3d0;
      margin-bottom:12px;
      position:relative;
      z-index:2;
    }
    .card h3{font-size:16px;line-height:1.25;margin-bottom:10px;color:#f0faf4;position:relative;z-index:2}
    .summary{font-size:13px;line-height:1.55;color:#9fb7aa;min-height:58px;position:relative;z-index:2}
    .strategic{
      margin-top:12px;
      border-radius:12px;
      border:1px solid rgba(16,185,129,.12);
      background:rgba(16,185,129,.06);
      padding:12px 12px;
      position:relative;z-index:2;
    }
    .strategic .label{font-family:'JetBrains Mono',monospace;font-size:11px;letter-spacing:1px;color:#a9f3d0;margin-bottom:6px}
    .strategic .text{font-size:12.5px;line-height:1.55;color:#d6efe3}
    .sourcebar{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-top:14px;
      position:relative;z-index:2;
      color:#7ea293;
      font-family:'JetBrains Mono',monospace;
      font-size:11.5px;
    }
    .sourcebar a{color:#34d399;text-decoration:none}
    .sourcebar a:hover{text-decoration:underline}
    .actions{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end}
    .btn-mini{
      border-radius:12px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.04);
      color:#cfe3d7;
      padding:7px 10px;
      font-size:12px;
      cursor:pointer;
      transition:all .2s ease;
      user-select:none;
      font-family:'Outfit',sans-serif;
      display:inline-flex;
      align-items:center;
      gap:6px;
      text-decoration:none;
      white-space:nowrap;
    }
    .btn-mini:hover{transform:translateY(-1px);background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.14)}
    .btn-mini.open{border-color:rgba(16,185,129,.18);background:rgba(16,185,129,.08)}
    .btn-mini.open:hover{border-color:rgba(52,211,153,.24);background:rgba(16,185,129,.12)}
    .empty-card{grid-column:1/-1}

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LOADING & ERROR STATE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    .center{display:flex;align-items:center;justify-content:center;padding:40px 0;color:#8ba89a;font-family:'JetBrains Mono',monospace;font-size:12px}
    .spinner{
      width:20px;height:20px;border-radius:50%;
      border:2px solid rgba(255,255,255,.14);
      border-top-color:#10b981;
      animation: spin 1s linear infinite;
      margin-right:12px;
    }
    @keyframes spin{to{transform:rotate(360deg)}}
    .errorState{
      display:none;
      padding:14px 16px;
      border-radius:14px;
      border:1px solid rgba(239,68,68,.22);
      background:rgba(239,68,68,.07);
      color:#ffd4d4;
      font-family:'JetBrains Mono',monospace;
      font-size:12px;
      line-height:1.5;
      white-space:pre-wrap;
      margin:14px 36px 0;
    }
    .errorState.show{display:block}

    /* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TOAST ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
    .toast{
      position:fixed;right:16px;bottom:16px;
      padding:10px 12px;border-radius:14px;
      border:1px solid rgba(16,185,129,.16);
      background:rgba(8,12,10,.82);
      color:#d8fff0;
      font-family:'JetBrains Mono',monospace;
      font-size:12px;
      opacity:0;
      transform:translateY(10px);
      transition:opacity .18s ease, transform .18s ease;
      z-index:50;
      backdrop-filter: blur(12px);
      pointer-events:none;
    }
    .toast.show{opacity:1;transform:translateY(0)}

    /* Responsive */
    @media (max-width:1100px){
      .cards{grid-template-columns:repeat(2,1fr)}
      .exec-grid{grid-template-columns:1fr}
      .method-grid{grid-template-columns:repeat(2,1fr)}
    }
    @media (max-width:680px){
      header{padding:0 18px}
      main{padding:18px 18px 54px}
      .controls-wrap,.exec-summary,.methodology,.banner,.errors{padding-left:18px;padding-right:18px}
      .hero{padding:40px 22px 34px}
      .cards{grid-template-columns:1fr}
      .method-grid{grid-template-columns:1fr}
      .errorState{margin-left:18px;margin-right:18px}
    }
  </style>
</head>

<body>
  <div class="orb orb-1"></div>
  <div class="orb orb-2"></div>
  <div class="orb orb-3"></div>

  <div class="top-bar"></div>

  <div class="container">
    <div class="timestamp-bar">
      <span>LAST UPDATE:</span>
      <span id="lastUpdated" class="time-value">‚Äî</span>
      <span id="schedule-text" class="Schedule">SCHEDULE: 08:00</span>
    </div>

    <header>
      <div class="hero">
        <div class="hero-cell hero-cell-1"></div>
        <div class="hero-cell hero-cell-2"></div>
        <div class="hero-cell hero-cell-3"></div>

        <div class="hero-badge">
          <div class="hero-pulse">
            <div class="hero-pulse-dot"></div>
            <div class="hero-pulse-ring"></div>
          </div>
          <div class="hero-live-text">LIVE ‚Ä¢ STATIC ‚Ä¢ PUBLIC</div>
        </div>

        <div class="hero-title">
          <span class="line1">Global Health & Wellness</span>
          <span class="line2">News Dashboard</span>
        </div>
        <div class="hero-tagline">STATIC SNAPSHOT ‚Ä¢ NO LOGIN ‚Ä¢ LINE READY</div>
      </div>
    </header>

    <section id="execSection" class="exec-summary" style="display:none">
      <div class="exec-summary-title">Executive Summary</div>
      <div class="exec-grid">
        <div class="exec-col">
          <div class="exec-col-title">üåç ‡πÄ‡∏ó‡∏£‡∏ô‡∏î‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏´‡πá‡∏ô</div>
          <div id="execTrends"></div>
        </div>
        <div class="exec-col">
          <div class="exec-col-title">üéØ ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡πÄ‡∏ä‡∏¥‡∏á‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå</div>
          <div id="execStrategic"></div>
        </div>
        <div class="exec-col">
          <div class="exec-col-title">üìç ‡∏°‡∏∏‡∏°‡∏°‡∏≠‡∏á‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô</div>
          <div id="execLocal"></div>
        </div>
      </div>
    </section>

    <section class="methodology">
      <div class="methodology-title">Methodology (How this works)</div>
      <div class="method-grid">
        <div class="method-box">
          <div class="method-icon">üßä</div>
          <div class="method-label">STATIC ONLY</div>
          <div class="method-text">‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏ô‡∏µ‡πâ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å data.json ‡πÉ‡∏ô repo ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</div>
        </div>
        <div class="method-box">
          <div class="method-icon">üõ°Ô∏è</div>
          <div class="method-label">NO API KEY</div>
          <div class="method-text">‡πÑ‡∏°‡πà‡∏°‡∏µ API key ‡∏ù‡∏±‡∏á‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö ‡∏ú‡∏π‡πâ‡∏ä‡∏°‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏Ñ‡∏¥‡∏î‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢</div>
        </div>
        <div class="method-box">
          <div class="method-icon">üí∏</div>
          <div class="method-label">PUBLISHER PAYS</div>
          <div class="method-text">‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏Å‡∏¥‡∏î‡πÉ‡∏ô GitHub Actions ‡∏ï‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á data.json</div>
        </div>
        <div class="method-box">
          <div class="method-icon">üìã</div>
          <div class="method-label">LINE READY</div>
          <div class="method-text">‡∏õ‡∏∏‡πà‡∏° Copy ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á LINE (Title/Summary/Link)</div>
        </div>
      </div>
    </section>

    <section id="controls" class="controls-wrap">
      <button class="filter-btn active" data-filter="all">ALL <span id="countAll" class="count">(0)</span></button>
      <button class="filter-btn" data-filter="global">GLOBAL <span id="countGlobal" class="count">(0)</span></button>
      <button class="filter-btn" data-filter="apac">APAC <span id="countApac" class="count">(0)</span></button>
      <button class="filter-btn" data-filter="thailand">TH <span id="countThailand" class="count">(0)</span></button>
      <button class="filter-btn" data-filter="research">RESEARCH <span id="countResearch" class="count">(0)</span></button>

      <div class="controls-spacer"></div>

      <div class="searchbox">
        <span class="icon">üîé</span>
        <input id="searchInput" type="text" placeholder="Search‚Ä¶ (GLP-1, skin, Siriraj, Mayo, WHO)">
      </div>

      <select id="sortSelect" class="sortsel" title="Sort">
        <option value="newest">Newest</option>
        <option value="oldest">Oldest</option>
        <option value="region">Region</option>
        <option value="source">Source</option>
      </select>

      <div id="callsBadge" class="calls-badge tip" data-tip="Calls/meta will appear here after load">üì¶ CALLS: <span id="callsMeta">‚Äî</span></div>

      <div id="statusPill" class="status-pill status-ok tip" data-tip="OK = ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚Ä¢ PARTIAL = ‡∏ö‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ error ‚Ä¢ ERROR = ‡πÇ‡∏´‡∏•‡∏î data.json ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ">
        <span class="status-dot"></span>
        <span id="statusText">OK</span>
      </div>

      <a class="btn-mini open tip" data-tip="‡πÄ‡∏õ‡∏¥‡∏î data.json ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π raw" href="./data.json" target="_blank" rel="noopener">üßæ data.json</a>
      <button id="btnReload" class="btn-mini tip" data-tip="‡πÇ‡∏´‡∏•‡∏î data.json ‡πÉ‡∏´‡∏°‡πà">üîÑ Reload</button>
    </section>

    <section id="partialBanner" class="banner">
      <div class="banner-inner">
        <div>
          <b>PARTIAL UPDATE</b> ‚Äî ‡∏ö‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤/‡∏ö‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö
          <div id="partialNote" style="opacity:.9;margin-top:4px">‚Äî</div>
        </div>
        <div style="opacity:.9">‚úÖ ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥</div>
      </div>
    </section>

    <section id="errorPanel" class="errors">
      <div class="errors-inner"></div>
    </section>

    <div id="errorState" class="errorState"></div>

    <main>
      <div id="loadingState" class="center">
        <div class="spinner"></div>
        <div>Loading data.json‚Ä¶</div>
      </div>
      <div id="cardsGrid" class="cards" style="display:none"></div>
    </main>
  </div>

  <div id="toast" class="toast">Copied ‚úÖ</div>

  <script>
    // ===== CONFIG =====
    // Fallback paths (fixes common GitHub Pages folder/layout mismatches)
    const DATA_URLS = ['./data.json','./data/data.json','../data.json'];

    // Marker used in pipeline (keep consistent)
    const RESEARCH_TAG_PREFIX = 'RESEARCH_TAG_PREFIX::';

    // ===== STATE =====
    let allItems = [];
    let titleIndex = new Map();
    let currentFilter = 'all';
    let searchTerm = '';
    let sortMode = 'newest';

    // ===== UTIL =====
    function escHtml(str){
      const d = document.createElement('div');
      d.textContent = String(str || '');
      return d.innerHTML;
    }
    function escAttr(str){
      return escHtml(str).replace(/"/g,'&quot;').replace(/'/g,'&#39;');
    }
    function showToast(msg){
      const t = document.getElementById('toast');
      t.textContent = msg;
      t.classList.add('show');
      setTimeout(()=>t.classList.remove('show'), 1100);
    }
    function normTitle(str){
      return String(str||'')
        .toLowerCase()
        .replace(/[\u200B-\u200D\uFEFF]/g,'')
        .replace(/[‚Äú‚Äù"‚Äô'`]/g,'')
        .replace(/[^\p{L}\p{N}]+/gu,' ')
        .trim();
    }
    function buildTitleIndex(items){
      titleIndex = new Map();
      (items||[]).forEach(it=>{
        const t = it && it.title ? normTitle(it.title) : '';
        if (!t) return;
        if (!titleIndex.has(t)) titleIndex.set(t, it);
      });
    }
    function findItemForBullet(text){
      const nt = normTitle(text);
      if (!nt) return null;
      if (titleIndex.has(nt)) return titleIndex.get(nt);
      let best=null, bestScore=0;
      for (const [k,it] of titleIndex.entries()){
        let score=0;
        if (k===nt) score=100;
        else if (k.startsWith(nt) || nt.startsWith(k)) score=85;
        else if (k.includes(nt) || nt.includes(k)) score=70;
        if (score){
          score += Math.min(k.length, nt.length)/10;
          if (score>bestScore){bestScore=score; best=it;}
        }
      }
      return best;
    }

    function mapCategory(item){
      const tag = String(item.query_tag || '');
      if (tag.startsWith(RESEARCH_TAG_PREFIX)) return 'research';
      const r = String(item.region || '').toLowerCase(); // global/regional/local
      if (r === 'global') return 'global';
      if (r === 'regional') return 'apac';
      if (r === 'local') return 'thailand';
      return 'global';
    }

    function sortItems(items){
      const copy = [...items];
      if (sortMode === 'source'){
        copy.sort((a,b)=> String(a.source||'').localeCompare(String(b.source||'')));
      } else if (sortMode === 'region'){
        const rank = { global:1, apac:2, thailand:3, research:4 };
        copy.sort((a,b)=> (rank[mapCategory(a)]||9) - (rank[mapCategory(b)]||9));
      } else if (sortMode === 'oldest'){
        copy.sort((a,b)=> (a.published_at||'').localeCompare(b.published_at||''));
      } else {
        copy.sort((a,b)=> (b.published_at||'').localeCompare(a.published_at||''));
      }
      return copy;
    }

    function applySearch(items){
      if (!searchTerm) return items;
      const q = searchTerm.toLowerCase();
      return items.filter(it=>{
        const hay = [
          it.title,it.summary,it.source,it.strategic_implication,it.query_tag,it.region
        ].map(v=>String(v||'').toLowerCase()).join(' ');
        return hay.includes(q);
      });
    }

    function updateCounts(){
      const counts = { all: allItems.length, global:0, apac:0, thailand:0, research:0 };
      allItems.forEach(it => { const k = mapCategory(it); if (counts[k]!=null) counts[k]++; });
      document.getElementById('countAll').textContent = `(${counts.all})`;
      document.getElementById('countGlobal').textContent = `(${counts.global})`;
      document.getElementById('countApac').textContent = `(${counts.apac})`;
      document.getElementById('countThailand').textContent = `(${counts.thailand})`;
      document.getElementById('countResearch').textContent = `(${counts.research})`;
    }

    function buildLineText(item){
      const cat = mapCategory(item);
      const regionLabel =
        cat === 'global' ? 'üåç GLOBAL' :
        cat === 'apac' ? 'üåè APAC' :
        cat === 'thailand' ? 'üáπüá≠ TH' :
        'üî¨ RESEARCH';

      const lines = [];
      lines.push(`${regionLabel} ‚Äî ${item.title || ''}`.trim());
      if (item.summary) lines.push(`üß† ${item.summary}`);
      if (item.strategic_implication) lines.push(`üéØ ${item.strategic_implication}`);
      if (item.source) lines.push(`üì∞ ${item.source}`);
      if (item.url) lines.push(`üîó ${item.url}`);
      return lines.join('\n').trim();
    }

    // ===== MOBILE TOOLTIP TOGGLE (tap) =====
    let openTipEl = null;
    function closeTip(el){
      if (!el) return;
      el.classList.remove('tip-open');
    }
    function openTip(el){
      if (!el) return;
      el.classList.add('tip-open');
      openTipEl = el;
    }

    document.addEventListener('pointerdown', (e)=>{
      if (e.pointerType !== 'touch' && e.pointerType !== 'pen') return;
      const tip = e.target.closest('.tip[data-tip], .exec-item[data-tip]');
      if (!tip){
        closeTip(openTipEl); openTipEl=null;
        return;
      }
      if (openTipEl === tip){
        closeTip(openTipEl); openTipEl=null;
      } else {
        closeTip(openTipEl);
        openTip(tip);
      }
    }, { passive:true });

    window.addEventListener('scroll', ()=>{
      closeTip(openTipEl); openTipEl=null;
    }, { passive:true });

    // Exec bullets: desktop click opens; mobile tap1 shows tip; tap2 opens
    let lastExecTap = null;
    let lastExecTapTimer = null;
    function isTouchLike(){
      return window.matchMedia && window.matchMedia('(hover: none)').matches;
    }
    document.addEventListener('click', (e)=>{
      const el = e.target.closest('.exec-item[data-url]');
      if (!el) return;
      const url = el.getAttribute('data-url');
      if (!url) return;

      if (!isTouchLike()){
        window.open(url, '_blank', 'noopener,noreferrer');
        return;
      }

      if (lastExecTap !== el){
        lastExecTap = el;
        clearTimeout(lastExecTapTimer);
        lastExecTapTimer = setTimeout(()=>{ lastExecTap=null; }, 1600);

        closeTip(openTipEl);
        openTip(el);
        return;
      }
      window.open(url, '_blank', 'noopener,noreferrer');
    }, { passive:true });

    document.addEventListener('keydown', (e)=>{
      if (e.key === 'Escape'){
        closeTip(openTipEl); openTipEl=null;
      }
    });

    // ===== DATA LOADER (fallback paths) =====
    async function fetchFirstAvailableJson(urls){
      let lastErr = null;
      for (const u of urls){
        try{
          const r = await fetch(u, { cache: 'no-store' });
          if (!r.ok) { lastErr = new Error(`Fetch ${u} -> HTTP ${r.status}`); continue; }
          const j = await r.json();
          return { url: u, json: j };
        }catch(e){
          lastErr = e;
        }
      }
      throw lastErr || new Error('No valid data.json found in fallback paths');
    }

    // ===== RENDER =====
    function renderExecSummary(es){
      const trendsEl = document.getElementById('execTrends');
      const stratEl  = document.getElementById('execStrategic');
      const localEl  = document.getElementById('execLocal');

      function renderBullet(text){
        const it = findItemForBullet(text);
        const tip = it ? (it.summary || it.strategic_implication || it.title || text) : text;
        const url = it ? (it.url || '') : '';
        return `<div class="exec-item tip" data-tip="${escAttr(tip)}"${url ? ` data-url="${escAttr(url)}"` : ''}>${escHtml(text)}</div>`;
      }

      trendsEl.innerHTML = (es.trends || []).map(renderBullet).join('');
      stratEl.innerHTML  = (es.strategic || []).map(renderBullet).join('');
      localEl.innerHTML  = (es.local || []).map(renderBullet).join('');

      document.getElementById('execSection').style.display = '';
    }

    function renderCards(){
      const grid = document.getElementById('cardsGrid');
      let items = currentFilter === 'all' ? allItems : allItems.filter(i=>mapCategory(i)===currentFilter);
      items = applySearch(items);
      items = sortItems(items);

      if (!items.length){
        grid.innerHTML = `
          <div class="card empty-card">
            <div class="badge" style="border-color:rgba(245,158,11,.22);background:rgba(245,158,11,.10);color:#fbbf24">NO RESULTS</div>
            <h3>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</h3>
            <div class="summary">‡∏•‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Filter ‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏Ñ‡∏£‡∏±‡∏ö</div>
          </div>
        `;
        return;
      }

      grid.innerHTML = items.map((item, idx)=>{
        const delay = idx * 0.05;
        const openLink = item.url
          ? `<a class="btn-mini open" href="${escAttr(item.url)}" target="_blank" rel="noopener">üîó Open</a>`
          : `<span class="btn-mini open" style="opacity:.6;cursor:not-allowed">No link</span>`;

        return `
          <div class="card" style="animation-delay:${delay}s">
            <div class="badge">${escHtml((mapCategory(item)||'').toUpperCase())}</div>
            <h3>${escHtml(item.title || '')}</h3>
            <div class="summary">${escHtml(item.summary || '')}</div>

            ${item.strategic_implication ? `
              <div class="strategic">
                <div class="label">STRATEGIC</div>
                <div class="text">${escHtml(item.strategic_implication)}</div>
              </div>
            ` : ''}

            <div class="sourcebar">
              <div>${item.url ? `<a href="${escAttr(item.url)}" target="_blank" rel="noopener">${escHtml(item.source || 'Source')} ‚Üí</a>` : escHtml(item.source || 'Source')}</div>
              <div class="actions">
                ${openLink}
                <button class="btn-mini copy" data-copy="${idx}" data-copytype="line">üìã LINE</button>
                <button class="btn-mini copy" data-copy="${idx}" data-copytype="summary">‚úÇÔ∏è Summary</button>
                <button class="btn-mini copy" data-copy="${idx}" data-copytype="exec">üß† Exec</button>
              </div>
            </div>
          </div>
        `;
      }).join('');

      grid.querySelectorAll('button[data-copy]').forEach(btn=>{
        btn.addEventListener('click', async ()=>{
          const idx = Number(btn.getAttribute('data-copy')||'0');
          const typ = String(btn.getAttribute('data-copytype')||'line');

          let view = currentFilter === 'all' ? allItems : allItems.filter(i=>mapCategory(i)===currentFilter);
          view = applySearch(view);
          view = sortItems(view);

          const item = view[idx];
          if (!item) return;

          let text = '';
          if (typ === 'summary'){
            text = `üì∞ ${item.title || ''}\nüß† ${item.summary || ''}\n${item.url ? `üîó ${item.url}` : ''}`.trim();
          } else if (typ === 'exec'){
            text = `üì∞ ${item.title || ''}\nüéØ ${item.strategic_implication || ''}\n${item.url ? `üîó ${item.url}` : ''}`.trim();
          } else {
            text = buildLineText(item);
          }

          try{
            await navigator.clipboard.writeText(text);
            showToast('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‚úÖ');
          }catch{
            const ta = document.createElement('textarea');
            ta.value = text;
            document.body.appendChild(ta);
            ta.select();
            document.execCommand('copy');
            ta.remove();
            showToast('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‚úÖ');
          }
        });
      });
    }

    // ===== LOAD =====
    async function loadData(){
      const loading = document.getElementById('loadingState');
      const grid = document.getElementById('cardsGrid');
      const errState = document.getElementById('errorState');
      const errPanel = document.getElementById('errorPanel');
      const errInner = errPanel ? errPanel.querySelector('.errors-inner') : null;

      errState.classList.remove('show');
      if (errPanel){ errPanel.classList.remove('show'); errPanel.style.display='none'; if (errInner) errInner.textContent=''; }

      loading.style.display = '';
      grid.style.display = 'none';

      try{
        const { url: usedUrl, json: data } = await fetchFirstAvailableJson(DATA_URLS);
        // Forensic: show which path succeeded
        const cb = document.getElementById('callsBadge');
        if (cb) cb.setAttribute('data-tip', `Loaded from: ${usedUrl}`);

        // Meta
        if (data && data.meta){
          // ===== UPDATE HEADER (LAST UPDATE + SCHEDULE) =====
          const lastEl = document.getElementById("lastUpdated");
          const schedEl = document.getElementById("schedule-text");
          
          if (lastEl && data.meta.generated_at_local){lastEl.textContent = data.meta.generated_at_local;
          }
          if (schedEl && data.meta.schedule_local){schedEl.textContent = data.meta.schedule_local;
          }
          const callsMeta = document.getElementById('callsMeta');
          if (callsMeta){
            if (data.meta.calls_used != null && data.meta.calls_budget != null){
              callsMeta.textContent = `${data.meta.calls_used}/${data.meta.calls_budget} ‚Ä¢ ${data.meta.partial ? 'PARTIAL' : 'OK'}`;
            } else {
              callsMeta.textContent = '‚Äî';
            }
          }
          const pill = document.getElementById('statusPill');
          const st = document.getElementById('statusText');
          if (pill && st){
            pill.classList.remove('status-ok','status-partial','status-err');
            if (data.meta.partial){
              pill.classList.add('status-partial'); st.textContent='PARTIAL';
            } else {
              pill.classList.add('status-ok'); st.textContent='OK';
            }
          }

          // Banner
          const banner = document.getElementById('partialBanner');
          const note = document.getElementById('partialNote');
          if (data.meta.partial){
            banner.classList.add('show');
            note.textContent = data.meta.notes || '‡∏ö‡∏≤‡∏á‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏°‡∏µ error ‡πÅ‡∏ï‡πà‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ';
          } else {
            banner.classList.remove('show');
          }

          // Errors list (optional)
          const errs = Array.isArray(data.meta.errors) ? data.meta.errors : [];
          if (errs.length && errPanel && errInner){
            errPanel.style.display='block';
            errPanel.classList.add('show');
            errInner.textContent = `‚ö†Ô∏è Errors:\n` + errs.map(e=> typeof e==='string' ? e : (e.tag || JSON.stringify(e))).join('\n');
          }
        }

        // Items
        allItems = Array.isArray(data.items) ? data.items : [];
        buildTitleIndex(allItems);
        updateCounts();

        // Exec
        if (data.executive_summary){
          renderExecSummary(data.executive_summary);
        } else {
          document.getElementById('execSection').style.display = 'none';
        }

        renderCards();

        loading.style.display = 'none';
        grid.style.display = '';
      }catch(e){
        const pill = document.getElementById('statusPill');
        const st = document.getElementById('statusText');
        if (pill && st){
          pill.classList.remove('status-ok','status-partial','status-err');
          pill.classList.add('status-err');
          st.textContent = 'ERROR';
        }

        errState.textContent =
          `‚ùå Load failed\n` +
          `Tried: ${DATA_URLS.join(', ')}\n` +
          `Reason: ${String(e)}`;
        errState.classList.add('show');

        loading.style.display = 'none';
      }
    }

    // ===== EVENTS =====
    document.addEventListener('DOMContentLoaded', ()=>{
      // filters
      document.querySelectorAll('.filter-btn').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          currentFilter = btn.dataset.filter || 'all';
          document.querySelectorAll('.filter-btn').forEach(b=>b.classList.toggle('active', b===btn));
          renderCards();
        });
      });

      // search
      const s = document.getElementById('searchInput');
      s.addEventListener('input', ()=>{
        searchTerm = s.value.trim();
        renderCards();
      });

      // sort
      const so = document.getElementById('sortSelect');
      so.addEventListener('change', ()=>{
        sortMode = so.value;
        renderCards();
      });

      // reload
      document.getElementById('btnReload').addEventListener('click', loadData);

      // Sticky controls
      const controls = document.getElementById('controls');
      const stickyAt = controls.offsetTop;
      window.addEventListener('scroll', ()=>{
        if (window.scrollY > stickyAt) controls.classList.add('sticky');
        else controls.classList.remove('sticky');
      }, { passive:true });

      loadData();
    });
  </script>
</body>
</html>
